---
import Layout from '../layouts/Layout.astro';
import SocialProof from '../components/SocialProof.astro';
import Ofertas from '../components/Ofertas.astro';
import CabinasSection from '../components/CabinasSection.astro';
import MotorhomeSection from '../components/MotorhomeSection.astro';
import FinalCTA from '../components/FinalCTA.astro';
import CondicionesModal from '../components/CondicionesModal.astro';
import { Check, MapPin, Mail, MessageCircle, Phone, ArrowRight, Waves, Sun, Trees, Star, CreditCard } from 'lucide-astro';
import { Image } from 'astro:assets';

// Import images
import heroImage from '../assets/images/gallery/IMG-20220808-WA0026.jpg';
import jacuzziIcon from '../assets/images/amenities/jacuzzi.png';
import parrillaIcon from '../assets/images/amenities/parrilla.png';
import mapaIcon from '../assets/images/theme/mapa.png';
import motorhomeIcon from '../assets/images/amenities/motorhome.png';

// SEO: Page-specific metadata
const pageTitle = "Cabañas en Matanzas | Lomatanzas Family Lodge - Frente a la Playa";
const pageDescription = "Arrienda cabañas en Playa de Matanzas, Litoral Central de Chile. Family Lodge con tinajas y jacuzzi disponibles, estacionamiento para motorhome. Reserva directo por WhatsApp.";

// Amenities con iconos y descripciones
const amenities = [
  {
    icon: jacuzziIcon,
    title: "Tinajas & Jacuzzi",
    description: "Disponibles con costo adicional"
  },
  {
    icon: parrillaIcon,
    title: "Quinchos Equipados",
    description: "Parrilla y mesón para asados"
  },
  {
    icon: mapaIcon,
    title: "Entorno Natural",
    description: "Senderos y vistas al mar"
  },
  {
    icon: motorhomeIcon,
    title: "Parking Motorhome",
    description: "Sitios con servicios completos"
  }
];

// Lugares cercanos para SEO local
const nearbyPlaces = [
  { name: "Playa de Matanzas", time: "5 min en auto", icon: Waves },
  { name: "Punta de Lobos", time: "25 min en auto", icon: Waves },
  { name: "Puertecillo", time: "15 min en auto", icon: Sun },
  { name: "Acantilados de Pupuya", time: "20 min en auto", icon: Trees }
];
---

<Layout title={pageTitle} description={pageDescription}>
  
  <!-- HERO SECTION -->
  <section class="relative min-h-[90vh] flex items-center justify-center overflow-hidden">
    <!-- Background Image -->
    <div class="absolute inset-0">
      <Image 
        src={heroImage} 
        alt="Vista aérea de Lomatanzas y la Playa de Matanzas" 
        class="w-full h-full object-cover"
        loading="eager"
        width={1920}
        height={1080}
      />
      <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/50 to-black/70"></div>
    </div>
    
    <!-- Decorative Wave -->
    <div class="absolute bottom-0 left-0 right-0">
      <svg viewBox="0 0 1440 120" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-full h-auto">
        <path d="M0 120L60 110C120 100 240 80 360 70C480 60 600 60 720 65C840 70 960 80 1080 85C1200 90 1320 90 1380 90L1440 90V120H1380C1320 120 1200 120 1080 120C960 120 840 120 720 120C600 120 480 120 360 120C240 120 120 120 60 120H0Z" fill="white"/>
      </svg>
    </div>
    
    <!-- Hero Content -->
    <div class="container-custom relative z-10 text-center text-white py-20">
      <!-- Badge -->
      <div class="inline-flex items-center gap-2 bg-white/20 backdrop-blur-md px-4 py-2 rounded-full text-sm font-medium mb-6 animate-fade-in border border-white/30">
        <MapPin class="w-4 h-4 text-amber-300" />
        <span class="text-white">Playa de Matanzas, Litoral Central</span>
      </div>
      
      <!-- H1 con Keywords principales - Animación escalonada -->
      <h1 class="text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-display font-bold mb-6 leading-tight drop-shadow-lg [text-shadow:_0_2px_10px_rgb(0_0_0_/_40%)]">
        <span class="text-white">
          <span class="hero-word" style="animation-delay: 0ms">Cabañas</span>{" "}
          <span class="hero-word" style="animation-delay: 80ms">y</span>{" "}
          <span class="hero-word" style="animation-delay: 160ms">Alojamiento</span>{" "}
          <span class="hero-word" style="animation-delay: 240ms">en</span>
        </span>
        <span class="block text-amber-300 mt-2 drop-shadow-lg">
          <span class="hero-word" style="animation-delay: 350ms">Playa</span>{" "}
          <span class="hero-word" style="animation-delay: 430ms">de</span>{" "}
          <span class="hero-word" style="animation-delay: 510ms">Matanzas</span>
        </span>
      </h1>
      
      <!-- Subtítulo con beneficios -->
      <p class="text-lg md:text-xl lg:text-2xl text-white max-w-3xl mx-auto mb-10 leading-relaxed animate-fade-in-up delay-500">
        Family Lodge con tinajas y jacuzzi disponibles, estacionamiento para motorhome. 
        <strong class="text-amber-300">Tu escape perfecto cerca al mar.</strong>
      </p>
      
      <!-- CTA Buttons -->
      <div class="flex flex-col sm:flex-row gap-4 justify-center items-center animate-fade-in-up delay-600">
        <a 
          href="https://wa.me/56982892752?text=Hola!%20Quiero%20consultar%20disponibilidad%20en%20Lomatanzas" 
          target="_blank"
          rel="noopener noreferrer"
          class="shine-effect inline-flex items-center justify-center gap-2 px-8 py-4 rounded-full font-display font-bold text-white bg-[#25D366] hover:bg-[#20BA5A] shadow-lg hover:shadow-xl hover:-translate-y-0.5 hover:scale-105 transition-all duration-300 ease-out text-lg"
        >
          <MessageCircle class="w-5 h-5" />
          Reservar por WhatsApp
        </a>
        <a href="#cabanas" class="inline-flex items-center justify-center gap-2 px-8 py-4 rounded-full font-display font-semibold border-2 border-white text-white bg-transparent hover:bg-white hover:text-gray-900 transition-all duration-300 ease-out">
          Ver Cabañas
          <ArrowRight class="w-4 h-4" />
        </a>
      </div>
      
      <!-- Trust badge -->
      <div class="mt-10 flex items-center justify-center gap-2 text-white text-sm animate-fade-in delay-700">
        <div class="flex space-x-1">
          <Star class="w-4 h-4 text-amber-400 fill-amber-400" />
          <Star class="w-4 h-4 text-amber-400 fill-amber-400" />
          <Star class="w-4 h-4 text-amber-400 fill-amber-400" />
          <Star class="w-4 h-4 text-amber-400 fill-amber-400" />
          <Star class="w-4 h-4 text-amber-400 fill-amber-400" />
        </div>
        <span class="drop-shadow-md">+8 años recibiendo familias</span>
      </div>
    </div>
  </section>

  <!-- SOCIAL PROOF -->
  <SocialProof />

  <!-- OFERTAS -->
  <Ofertas />

  <!-- AMENITIES SECTION -->
  <section id="comodidades" class="section-padding bg-white">
    <div class="container-custom">
      <div class="text-center mb-12">
        <div class="w-20 h-1 mx-auto mb-6 rounded-full bg-gradient-to-r from-primary to-secondary"></div>
        <h2 class="text-3xl md:text-4xl lg:text-5xl font-display font-bold text-center mb-4 text-gray-900">Todo lo que Necesitas</h2>
        <p class="text-lg md:text-xl text-center max-w-2xl mx-auto mb-12 text-warm-gray">
          Comodidades pensadas para que disfrutes en familia
        </p>
      </div>
      
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6 md:gap-8">
        {amenities.map((amenity, index) => (
          <div 
            class="amenity-card group text-center p-6 rounded-2xl bg-white/50"
            style={`animation-delay: ${index * 100}ms`}
          >
            <div class="relative inline-block mb-4">
              <Image 
                src={amenity.icon} 
                class="h-16 w-auto mx-auto opacity-70 group-hover:opacity-100 transition-all duration-300 group-hover:scale-110" 
                alt={amenity.title}
                loading="lazy"
                width={64}
                height={64}
              />
            </div>
            <h3 class="font-display font-semibold text-gray-900 mb-1">{amenity.title}</h3>
            <p class="text-sm text-gray-500">{amenity.description}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- CABAÑAS SECTION -->
  <CabinasSection />

  <!-- MOTORHOME / CAMPING SECTION -->
  <MotorhomeSection />

  <!-- POLÍTICAS DE RESERVA SECTION -->
  <section id="reserva" class="py-12 md:py-16 bg-white">
    <div class="container-custom">
      <div class="max-w-3xl mx-auto">
        <div class="card-hover bg-gradient-to-br from-cyan-600 to-cyan-700 text-white rounded-2xl p-8 md:p-10 shadow-xl">
          <div class="text-center mb-8">
            <h2 class="text-2xl md:text-3xl font-display font-bold text-white mb-2">Información de Reserva</h2>
            <p class="text-cyan-100">Lo que necesitas saber antes de reservar</p>
          </div>
          
          <div class="grid sm:grid-cols-2 gap-6 mb-8">
            <div class="flex items-start gap-3">
              <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center shrink-0 mt-0.5">
                <Check class="w-4 h-4 text-amber-300" />
              </div>
              <div>
                <span class="font-semibold text-white block">50% de abono</span>
                <span class="text-cyan-100 text-sm">Para confirmar tu reserva</span>
              </div>
            </div>
            <div class="flex items-start gap-3">
              <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center shrink-0 mt-0.5">
                <Check class="w-4 h-4 text-amber-300" />
              </div>
              <div>
                <span class="font-semibold text-white block">Saldo al check-in</span>
                <span class="text-cyan-100 text-sm">Paga el resto al llegar</span>
              </div>
            </div>
            <div class="flex items-start gap-3">
              <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center shrink-0 mt-0.5">
                <Check class="w-4 h-4 text-amber-300" />
              </div>
              <div>
                <span class="font-semibold text-white block">Mínimo 2 noches</span>
                <span class="text-cyan-100 text-sm">En fines de semana</span>
              </div>
            </div>
            <div class="flex items-start gap-3">
              <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center shrink-0 mt-0.5">
                <Check class="w-4 h-4 text-amber-300" />
              </div>
              <div>
                <span class="font-semibold text-white block">Cancelación gratuita</span>
                <span class="text-cyan-100 text-sm">Con 15 días de anticipación</span>
              </div>
            </div>
            <div class="flex items-start gap-3 sm:col-span-2 justify-center">
              <div class="w-8 h-8 rounded-full bg-white/20 flex items-center justify-center shrink-0 mt-0.5">
                <CreditCard class="w-4 h-4 text-amber-300" />
              </div>
              <div>
                <span class="font-semibold text-white block">Tarjetas aceptadas</span>
                <span class="text-cyan-100 text-sm">Débito y crédito</span>
              </div>
            </div>
          </div>
          
          <div class="text-center">
            <button 
              type="button"
              class="inline-flex items-center gap-2 text-white/90 hover:text-white underline underline-offset-4 transition-colors text-sm"
              onclick="document.getElementById('condiciones-modal')?.showModal()"
            >
              Ver todas las condiciones y políticas
              <ArrowRight class="w-4 h-4" />
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- NEARBY PLACES - SEO Local -->
  <section class="py-12 bg-sand-dark">
    <div class="container-custom">
      <div class="flex flex-wrap items-center justify-center gap-8 text-sm">
        <span class="font-display font-semibold text-gray-700">Lugares cercanos:</span>
        {nearbyPlaces.map(place => (
          <div class="flex items-center gap-2 text-gray-600">
            <place.icon class="w-4 h-4 text-cyan-600" />
            <span class="font-medium">{place.name}</span>
            <span class="text-gray-400">• {place.time}</span>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- FINAL CTA -->
  <FinalCTA />

  <!-- CONTACT & MAP SECTION -->
  <section id="contacto" class="bg-white">
    <!-- Map -->
    <div class="h-[400px] w-full grayscale-[50%] hover:grayscale-0 transition-all duration-500">
      <iframe 
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3309.4933820522647!2d-71.8564614!3d-33.9541561!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9663d14b43e6f52b%3A0x9682b41d8b8add46!2sLomatanzas%20Family%20Lodge%2C%20Caba%C3%B1as%20Matanzas!5e0!3m2!1ses-419!2scl!4v1768967366462!5m2!1ses-419!2scl" 
        width="100%" 
        height="100%" 
        style="border:0" 
        allowfullscreen 
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"
        title="Ubicación de Lomatanzas en Google Maps"
      ></iframe>
    </div>
    
    <!-- Contact Info -->
    <div class="container-custom py-12">
      <div class="card-glass bg-white p-8 md:p-12 rounded-2xl shadow-xl border border-gray-100 md:-mt-24 relative z-10 grid md:grid-cols-2 gap-12">
        <div>
          <h3 class="text-2xl font-display font-bold mb-6">Encuéntranos</h3>
          <div class="space-y-4 text-gray-600">
            <p class="flex items-start gap-3">
              <MapPin class="w-5 h-5 mt-0.5 text-cyan-600 shrink-0" /> 
              <span>
                <strong class="text-gray-900 block">Lomatanzas</strong>
                Navidad, VI Región, Chile
              </span>
            </p>
            <p class="flex items-center gap-3">
              <Mail class="w-5 h-5 text-cyan-600 shrink-0" /> 
              <a href="mailto:contacto@lomatanzas.cl" class="hover:text-cyan-600 transition-colors">contacto@lomatanzas.cl</a>
            </p>
            <p class="flex items-center gap-3">
              <Phone class="w-5 h-5 text-cyan-600 shrink-0" /> 
              <a href="tel:+56982892752" class="hover:text-cyan-600 transition-colors">+56 9 8289 2752</a>
            </p>
          </div>
          
          <!-- Directions hint -->
          <div class="mt-6 p-4 bg-sand rounded-xl text-sm text-gray-600">
            <strong class="text-gray-900">¿Cómo llegar?</strong><br/>
            Desde Santiago: Ruta 5 Sur hasta San Fernando, luego Ruta 90 hacia Pichilemu. En el cruce tomar hacia Navidad/Matanzas.
          </div>
        </div>
        
        <div>
          <h3 class="text-2xl font-display font-bold mb-6">Reserva Directa</h3>
          <p class="text-gray-600 mb-6">
            Escríbenos por WhatsApp para consultar disponibilidad y reservar tu estadía en Lomatanzas.
          </p>
          <div class="flex flex-col gap-4">
            <a 
              href="https://wa.me/56982892752?text=Hola!%20Quiero%20consultar%20disponibilidad%20en%20Lomatanzas" 
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center justify-center gap-2 px-8 py-4 rounded-full font-display font-bold text-white bg-[#25D366] hover:bg-[#20BA5A] shadow-lg hover:shadow-xl hover:-translate-y-0.5 hover:scale-105 transition-all duration-300 ease-out"
            >
              <MessageCircle class="w-5 h-5" /> 
              Escribir por WhatsApp
            </a>
            <a 
              href="mailto:contacto@lomatanzas.cl" 
              class="inline-flex items-center justify-center gap-2 px-8 py-4 rounded-full font-display font-semibold border-2 border-cyan-600 text-cyan-600 bg-transparent hover:bg-cyan-600 hover:text-white transition-all duration-300 ease-out"
            >
              <Mail class="w-5 h-5" /> 
              Enviar Email
            </a>
          </div>
          
          <!-- Enlace a condiciones -->
          <div class="mt-6 pt-4 border-t border-gray-100">
            <CondicionesModal />
          </div>
        </div>
      </div>
    </div>
  </section>

</Layout>

<script>
  // Scroll reveal animation
  const observerOptions = {
    root: null,
    rootMargin: '0px',
    threshold: 0.1
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, observerOptions);

  document.querySelectorAll('.reveal').forEach(el => {
    observer.observe(el);
  });
</script>
